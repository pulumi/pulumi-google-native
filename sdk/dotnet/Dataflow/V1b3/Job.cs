// *** WARNING: this file was generated by the Pulumi SDK Generator. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.GoogleNative.Dataflow.V1b3
{
    /// <summary>
    /// Creates a Cloud Dataflow job. To create a job, we recommend using `projects.locations.jobs.create` with a [regional endpoint] (https://cloud.google.com/dataflow/docs/concepts/regional-endpoints). Using `projects.jobs.create` is not recommended, as your job will always start in `us-central1`. Do not enter confidential information when you supply string values using the API.
    /// Note - this resource's API doesn't support deletion. When deleted, the resource will persist
    /// on Google Cloud even though it will be deleted from Pulumi state.
    /// </summary>
    [GoogleNativeResourceType("google-native:dataflow/v1b3:Job")]
    public partial class Job : global::Pulumi.CustomResource
    {
        /// <summary>
        /// The client's unique identifier of the job, re-used across retried attempts. If this field is set, the service will ensure its uniqueness. The request to create a job will fail if the service has knowledge of a previously submitted job with the same client's ID and job name. The caller may use this field to ensure idempotence of job creation across retried attempts to create a job. By default, the field is empty and, in that case, the service ignores it.
        /// </summary>
        [Output("clientRequestId")]
        public Output<string> ClientRequestId { get; private set; } = null!;

        /// <summary>
        /// The timestamp when the job was initially created. Immutable and set by the Cloud Dataflow service.
        /// </summary>
        [Output("createTime")]
        public Output<string> CreateTime { get; private set; } = null!;

        /// <summary>
        /// If this is specified, the job's initial state is populated from the given snapshot.
        /// </summary>
        [Output("createdFromSnapshotId")]
        public Output<string> CreatedFromSnapshotId { get; private set; } = null!;

        /// <summary>
        /// The current state of the job. Jobs are created in the `JOB_STATE_STOPPED` state unless otherwise specified. A job in the `JOB_STATE_RUNNING` state may asynchronously enter a terminal state. After a job has reached a terminal state, no further state updates may be made. This field might be mutated by the Dataflow service; callers cannot mutate it.
        /// </summary>
        [Output("currentState")]
        public Output<string> CurrentState { get; private set; } = null!;

        /// <summary>
        /// The timestamp associated with the current state.
        /// </summary>
        [Output("currentStateTime")]
        public Output<string> CurrentStateTime { get; private set; } = null!;

        /// <summary>
        /// The environment for the job.
        /// </summary>
        [Output("environment")]
        public Output<Outputs.EnvironmentResponse> Environment { get; private set; } = null!;

        /// <summary>
        /// Deprecated.
        /// </summary>
        [Output("executionInfo")]
        public Output<Outputs.JobExecutionInfoResponse> ExecutionInfo { get; private set; } = null!;

        /// <summary>
        /// This field is populated by the Dataflow service to support filtering jobs by the metadata values provided here. Populated for ListJobs and all GetJob views SUMMARY and higher.
        /// </summary>
        [Output("jobMetadata")]
        public Output<Outputs.JobMetadataResponse> JobMetadata { get; private set; } = null!;

        /// <summary>
        /// User-defined labels for this job. The labels map can contain no more than 64 entries. Entries of the labels map are UTF8 strings that comply with the following restrictions: * Keys must conform to regexp: \p{Ll}\p{Lo}{0,62} * Values must conform to regexp: [\p{Ll}\p{Lo}\p{N}_-]{0,63} * Both keys and values are additionally constrained to be &lt;= 128 bytes in size.
        /// </summary>
        [Output("labels")]
        public Output<ImmutableDictionary<string, string>> Labels { get; private set; } = null!;

        [Output("location")]
        public Output<string> Location { get; private set; } = null!;

        /// <summary>
        /// The user-specified Dataflow job name. Only one active job with a given name can exist in a project within one region at any given time. Jobs in different regions can have the same name. If a caller attempts to create a job with the same name as an active job that already exists, the attempt returns the existing job. The name must match the regular expression `[a-z]([-a-z0-9]{0,1022}[a-z0-9])?`
        /// </summary>
        [Output("name")]
        public Output<string> Name { get; private set; } = null!;

        /// <summary>
        /// Preliminary field: The format of this data may change at any time. A description of the user pipeline and stages through which it is executed. Created by Cloud Dataflow service. Only retrieved with JOB_VIEW_DESCRIPTION or JOB_VIEW_ALL.
        /// </summary>
        [Output("pipelineDescription")]
        public Output<Outputs.PipelineDescriptionResponse> PipelineDescription { get; private set; } = null!;

        [Output("project")]
        public Output<string> Project { get; private set; } = null!;

        /// <summary>
        /// Deprecated. This field is now in the Job message.
        /// </summary>
        [Output("replaceJobId")]
        public Output<string> ReplaceJobId { get; private set; } = null!;

        /// <summary>
        /// If another job is an update of this job (and thus, this job is in `JOB_STATE_UPDATED`), this field contains the ID of that job.
        /// </summary>
        [Output("replacedByJobId")]
        public Output<string> ReplacedByJobId { get; private set; } = null!;

        /// <summary>
        /// The job's requested state. Applies to `UpdateJob` requests. Set `requested_state` with `UpdateJob` requests to switch between the states `JOB_STATE_STOPPED` and `JOB_STATE_RUNNING`. You can also use `UpdateJob` requests to change a job's state from `JOB_STATE_RUNNING` to `JOB_STATE_CANCELLED`, `JOB_STATE_DONE`, or `JOB_STATE_DRAINED`. These states irrevocably terminate the job if it hasn't already reached a terminal state. This field has no effect on `CreateJob` requests.
        /// </summary>
        [Output("requestedState")]
        public Output<string> RequestedState { get; private set; } = null!;

        /// <summary>
        /// This field may ONLY be modified at runtime using the projects.jobs.update method to adjust job behavior. This field has no effect when specified at job creation.
        /// </summary>
        [Output("runtimeUpdatableParams")]
        public Output<Outputs.RuntimeUpdatableParamsResponse> RuntimeUpdatableParams { get; private set; } = null!;

        /// <summary>
        /// Reserved for future use. This field is set only in responses from the server; it is ignored if it is set in any requests.
        /// </summary>
        [Output("satisfiesPzi")]
        public Output<bool> SatisfiesPzi { get; private set; } = null!;

        /// <summary>
        /// Reserved for future use. This field is set only in responses from the server; it is ignored if it is set in any requests.
        /// </summary>
        [Output("satisfiesPzs")]
        public Output<bool> SatisfiesPzs { get; private set; } = null!;

        /// <summary>
        /// This field may be mutated by the Cloud Dataflow service; callers cannot mutate it.
        /// </summary>
        [Output("stageStates")]
        public Output<ImmutableArray<Outputs.ExecutionStageStateResponse>> StageStates { get; private set; } = null!;

        /// <summary>
        /// The timestamp when the job was started (transitioned to JOB_STATE_PENDING). Flexible resource scheduling jobs are started with some delay after job creation, so start_time is unset before start and is updated when the job is started by the Cloud Dataflow service. For other jobs, start_time always equals to create_time and is immutable and set by the Cloud Dataflow service.
        /// </summary>
        [Output("startTime")]
        public Output<string> StartTime { get; private set; } = null!;

        /// <summary>
        /// Exactly one of step or steps_location should be specified. The top-level steps that constitute the entire job. Only retrieved with JOB_VIEW_ALL.
        /// </summary>
        [Output("steps")]
        public Output<ImmutableArray<Outputs.StepResponse>> Steps { get; private set; } = null!;

        /// <summary>
        /// The Cloud Storage location where the steps are stored.
        /// </summary>
        [Output("stepsLocation")]
        public Output<string> StepsLocation { get; private set; } = null!;

        /// <summary>
        /// A set of files the system should be aware of that are used for temporary storage. These temporary files will be removed on job completion. No duplicates are allowed. No file patterns are supported. The supported files are: Google Cloud Storage: storage.googleapis.com/{bucket}/{object} bucket.storage.googleapis.com/{object}
        /// </summary>
        [Output("tempFiles")]
        public Output<ImmutableArray<string>> TempFiles { get; private set; } = null!;

        /// <summary>
        /// The map of transform name prefixes of the job to be replaced to the corresponding name prefixes of the new job.
        /// </summary>
        [Output("transformNameMapping")]
        public Output<ImmutableDictionary<string, string>> TransformNameMapping { get; private set; } = null!;

        /// <summary>
        /// The type of Dataflow job.
        /// </summary>
        [Output("type")]
        public Output<string> Type { get; private set; } = null!;

        /// <summary>
        /// The level of information requested in response.
        /// </summary>
        [Output("view")]
        public Output<string?> View { get; private set; } = null!;


        /// <summary>
        /// Create a Job resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public Job(string name, JobArgs? args = null, CustomResourceOptions? options = null)
            : base("google-native:dataflow/v1b3:Job", name, args ?? new JobArgs(), MakeResourceOptions(options, ""))
        {
        }

        private Job(string name, Input<string> id, CustomResourceOptions? options = null)
            : base("google-native:dataflow/v1b3:Job", name, null, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
                ReplaceOnChanges =
                {
                    "location",
                    "project",
                },
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing Job resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static Job Get(string name, Input<string> id, CustomResourceOptions? options = null)
        {
            return new Job(name, id, options);
        }
    }

    public sealed class JobArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// The client's unique identifier of the job, re-used across retried attempts. If this field is set, the service will ensure its uniqueness. The request to create a job will fail if the service has knowledge of a previously submitted job with the same client's ID and job name. The caller may use this field to ensure idempotence of job creation across retried attempts to create a job. By default, the field is empty and, in that case, the service ignores it.
        /// </summary>
        [Input("clientRequestId")]
        public Input<string>? ClientRequestId { get; set; }

        /// <summary>
        /// The timestamp when the job was initially created. Immutable and set by the Cloud Dataflow service.
        /// </summary>
        [Input("createTime")]
        public Input<string>? CreateTime { get; set; }

        /// <summary>
        /// If this is specified, the job's initial state is populated from the given snapshot.
        /// </summary>
        [Input("createdFromSnapshotId")]
        public Input<string>? CreatedFromSnapshotId { get; set; }

        /// <summary>
        /// The current state of the job. Jobs are created in the `JOB_STATE_STOPPED` state unless otherwise specified. A job in the `JOB_STATE_RUNNING` state may asynchronously enter a terminal state. After a job has reached a terminal state, no further state updates may be made. This field might be mutated by the Dataflow service; callers cannot mutate it.
        /// </summary>
        [Input("currentState")]
        public Input<Pulumi.GoogleNative.Dataflow.V1b3.JobCurrentState>? CurrentState { get; set; }

        /// <summary>
        /// The timestamp associated with the current state.
        /// </summary>
        [Input("currentStateTime")]
        public Input<string>? CurrentStateTime { get; set; }

        /// <summary>
        /// The environment for the job.
        /// </summary>
        [Input("environment")]
        public Input<Inputs.EnvironmentArgs>? Environment { get; set; }

        /// <summary>
        /// Deprecated.
        /// </summary>
        [Input("executionInfo")]
        public Input<Inputs.JobExecutionInfoArgs>? ExecutionInfo { get; set; }

        /// <summary>
        /// The unique ID of this job. This field is set by the Dataflow service when the job is created, and is immutable for the life of the job.
        /// </summary>
        [Input("id")]
        public Input<string>? Id { get; set; }

        /// <summary>
        /// This field is populated by the Dataflow service to support filtering jobs by the metadata values provided here. Populated for ListJobs and all GetJob views SUMMARY and higher.
        /// </summary>
        [Input("jobMetadata")]
        public Input<Inputs.JobMetadataArgs>? JobMetadata { get; set; }

        [Input("labels")]
        private InputMap<string>? _labels;

        /// <summary>
        /// User-defined labels for this job. The labels map can contain no more than 64 entries. Entries of the labels map are UTF8 strings that comply with the following restrictions: * Keys must conform to regexp: \p{Ll}\p{Lo}{0,62} * Values must conform to regexp: [\p{Ll}\p{Lo}\p{N}_-]{0,63} * Both keys and values are additionally constrained to be &lt;= 128 bytes in size.
        /// </summary>
        public InputMap<string> Labels
        {
            get => _labels ?? (_labels = new InputMap<string>());
            set => _labels = value;
        }

        /// <summary>
        /// The [regional endpoint] (https://cloud.google.com/dataflow/docs/concepts/regional-endpoints) that contains this job.
        /// </summary>
        [Input("location")]
        public Input<string>? Location { get; set; }

        /// <summary>
        /// The user-specified Dataflow job name. Only one active job with a given name can exist in a project within one region at any given time. Jobs in different regions can have the same name. If a caller attempts to create a job with the same name as an active job that already exists, the attempt returns the existing job. The name must match the regular expression `[a-z]([-a-z0-9]{0,1022}[a-z0-9])?`
        /// </summary>
        [Input("name")]
        public Input<string>? Name { get; set; }

        /// <summary>
        /// Preliminary field: The format of this data may change at any time. A description of the user pipeline and stages through which it is executed. Created by Cloud Dataflow service. Only retrieved with JOB_VIEW_DESCRIPTION or JOB_VIEW_ALL.
        /// </summary>
        [Input("pipelineDescription")]
        public Input<Inputs.PipelineDescriptionArgs>? PipelineDescription { get; set; }

        /// <summary>
        /// The ID of the Google Cloud project that the job belongs to.
        /// </summary>
        [Input("project")]
        public Input<string>? Project { get; set; }

        /// <summary>
        /// If this job is an update of an existing job, this field is the job ID of the job it replaced. When sending a `CreateJobRequest`, you can update a job by specifying it here. The job named here is stopped, and its intermediate state is transferred to this job.
        /// </summary>
        [Input("replaceJobId")]
        public Input<string>? ReplaceJobId { get; set; }

        /// <summary>
        /// If another job is an update of this job (and thus, this job is in `JOB_STATE_UPDATED`), this field contains the ID of that job.
        /// </summary>
        [Input("replacedByJobId")]
        public Input<string>? ReplacedByJobId { get; set; }

        /// <summary>
        /// The job's requested state. Applies to `UpdateJob` requests. Set `requested_state` with `UpdateJob` requests to switch between the states `JOB_STATE_STOPPED` and `JOB_STATE_RUNNING`. You can also use `UpdateJob` requests to change a job's state from `JOB_STATE_RUNNING` to `JOB_STATE_CANCELLED`, `JOB_STATE_DONE`, or `JOB_STATE_DRAINED`. These states irrevocably terminate the job if it hasn't already reached a terminal state. This field has no effect on `CreateJob` requests.
        /// </summary>
        [Input("requestedState")]
        public Input<Pulumi.GoogleNative.Dataflow.V1b3.JobRequestedState>? RequestedState { get; set; }

        /// <summary>
        /// This field may ONLY be modified at runtime using the projects.jobs.update method to adjust job behavior. This field has no effect when specified at job creation.
        /// </summary>
        [Input("runtimeUpdatableParams")]
        public Input<Inputs.RuntimeUpdatableParamsArgs>? RuntimeUpdatableParams { get; set; }

        /// <summary>
        /// Reserved for future use. This field is set only in responses from the server; it is ignored if it is set in any requests.
        /// </summary>
        [Input("satisfiesPzs")]
        public Input<bool>? SatisfiesPzs { get; set; }

        [Input("stageStates")]
        private InputList<Inputs.ExecutionStageStateArgs>? _stageStates;

        /// <summary>
        /// This field may be mutated by the Cloud Dataflow service; callers cannot mutate it.
        /// </summary>
        public InputList<Inputs.ExecutionStageStateArgs> StageStates
        {
            get => _stageStates ?? (_stageStates = new InputList<Inputs.ExecutionStageStateArgs>());
            set => _stageStates = value;
        }

        /// <summary>
        /// The timestamp when the job was started (transitioned to JOB_STATE_PENDING). Flexible resource scheduling jobs are started with some delay after job creation, so start_time is unset before start and is updated when the job is started by the Cloud Dataflow service. For other jobs, start_time always equals to create_time and is immutable and set by the Cloud Dataflow service.
        /// </summary>
        [Input("startTime")]
        public Input<string>? StartTime { get; set; }

        [Input("steps")]
        private InputList<Inputs.StepArgs>? _steps;

        /// <summary>
        /// Exactly one of step or steps_location should be specified. The top-level steps that constitute the entire job. Only retrieved with JOB_VIEW_ALL.
        /// </summary>
        public InputList<Inputs.StepArgs> Steps
        {
            get => _steps ?? (_steps = new InputList<Inputs.StepArgs>());
            set => _steps = value;
        }

        /// <summary>
        /// The Cloud Storage location where the steps are stored.
        /// </summary>
        [Input("stepsLocation")]
        public Input<string>? StepsLocation { get; set; }

        [Input("tempFiles")]
        private InputList<string>? _tempFiles;

        /// <summary>
        /// A set of files the system should be aware of that are used for temporary storage. These temporary files will be removed on job completion. No duplicates are allowed. No file patterns are supported. The supported files are: Google Cloud Storage: storage.googleapis.com/{bucket}/{object} bucket.storage.googleapis.com/{object}
        /// </summary>
        public InputList<string> TempFiles
        {
            get => _tempFiles ?? (_tempFiles = new InputList<string>());
            set => _tempFiles = value;
        }

        [Input("transformNameMapping")]
        private InputMap<string>? _transformNameMapping;

        /// <summary>
        /// The map of transform name prefixes of the job to be replaced to the corresponding name prefixes of the new job.
        /// </summary>
        public InputMap<string> TransformNameMapping
        {
            get => _transformNameMapping ?? (_transformNameMapping = new InputMap<string>());
            set => _transformNameMapping = value;
        }

        /// <summary>
        /// The type of Dataflow job.
        /// </summary>
        [Input("type")]
        public Input<Pulumi.GoogleNative.Dataflow.V1b3.JobType>? Type { get; set; }

        /// <summary>
        /// The level of information requested in response.
        /// </summary>
        [Input("view")]
        public Input<string>? View { get; set; }

        public JobArgs()
        {
        }
        public static new JobArgs Empty => new JobArgs();
    }
}
