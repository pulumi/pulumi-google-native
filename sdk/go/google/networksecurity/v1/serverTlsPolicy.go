// *** WARNING: this file was generated by the Pulumi SDK Generator. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package v1

import (
	"context"
	"reflect"

	"github.com/pkg/errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Creates a new ServerTlsPolicy in a given project and location.
type ServerTlsPolicy struct {
	pulumi.CustomResourceState

	//  Determines if server allows plaintext connections. If set to true, server allows plain text connections. By default, it is set to false. This setting is not exclusive of other encryption modes. For example, if `allow_open` and `mtls_policy` are set, server allows both plain text and mTLS connections. See documentation of other encryption modes to confirm compatibility.
	AllowOpen pulumi.BoolOutput `pulumi:"allowOpen"`
	// The timestamp when the resource was created.
	CreateTime pulumi.StringOutput `pulumi:"createTime"`
	// Free-text description of the resource.
	Description pulumi.StringOutput `pulumi:"description"`
	// Set of label tags associated with the resource.
	Labels pulumi.StringMapOutput `pulumi:"labels"`
	//  Defines a mechanism to provision peer validation certificates for peer to peer authentication (Mutual TLS - mTLS). If not specified, client certificate will not be requested. The connection is treated as TLS and not mTLS. If `allow_open` and `mtls_policy` are set, server allows both plain text and mTLS connections.
	MtlsPolicy MTLSPolicyResponseOutput `pulumi:"mtlsPolicy"`
	// Name of the ServerTlsPolicy resource. It matches the pattern `projects/*/locations/{location}/serverTlsPolicies/{server_tls_policy}`
	Name pulumi.StringOutput `pulumi:"name"`
	//  Defines a mechanism to provision server identity (public and private keys). Cannot be combined with `allow_open` as a permissive mode that allows both plain text and TLS is not supported.
	ServerCertificate GoogleCloudNetworksecurityV1CertificateProviderResponseOutput `pulumi:"serverCertificate"`
	// The timestamp when the resource was updated.
	UpdateTime pulumi.StringOutput `pulumi:"updateTime"`
}

// NewServerTlsPolicy registers a new resource with the given unique name, arguments, and options.
func NewServerTlsPolicy(ctx *pulumi.Context,
	name string, args *ServerTlsPolicyArgs, opts ...pulumi.ResourceOption) (*ServerTlsPolicy, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.ServerTlsPolicyId == nil {
		return nil, errors.New("invalid value for required argument 'ServerTlsPolicyId'")
	}
	var resource ServerTlsPolicy
	err := ctx.RegisterResource("google-native:networksecurity/v1:ServerTlsPolicy", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetServerTlsPolicy gets an existing ServerTlsPolicy resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetServerTlsPolicy(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *ServerTlsPolicyState, opts ...pulumi.ResourceOption) (*ServerTlsPolicy, error) {
	var resource ServerTlsPolicy
	err := ctx.ReadResource("google-native:networksecurity/v1:ServerTlsPolicy", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering ServerTlsPolicy resources.
type serverTlsPolicyState struct {
}

type ServerTlsPolicyState struct {
}

func (ServerTlsPolicyState) ElementType() reflect.Type {
	return reflect.TypeOf((*serverTlsPolicyState)(nil)).Elem()
}

type serverTlsPolicyArgs struct {
	//  Determines if server allows plaintext connections. If set to true, server allows plain text connections. By default, it is set to false. This setting is not exclusive of other encryption modes. For example, if `allow_open` and `mtls_policy` are set, server allows both plain text and mTLS connections. See documentation of other encryption modes to confirm compatibility.
	AllowOpen *bool `pulumi:"allowOpen"`
	// Free-text description of the resource.
	Description *string `pulumi:"description"`
	// Set of label tags associated with the resource.
	Labels   map[string]string `pulumi:"labels"`
	Location *string           `pulumi:"location"`
	//  Defines a mechanism to provision peer validation certificates for peer to peer authentication (Mutual TLS - mTLS). If not specified, client certificate will not be requested. The connection is treated as TLS and not mTLS. If `allow_open` and `mtls_policy` are set, server allows both plain text and mTLS connections.
	MtlsPolicy *MTLSPolicy `pulumi:"mtlsPolicy"`
	// Name of the ServerTlsPolicy resource. It matches the pattern `projects/*/locations/{location}/serverTlsPolicies/{server_tls_policy}`
	Name    *string `pulumi:"name"`
	Project *string `pulumi:"project"`
	//  Defines a mechanism to provision server identity (public and private keys). Cannot be combined with `allow_open` as a permissive mode that allows both plain text and TLS is not supported.
	ServerCertificate *GoogleCloudNetworksecurityV1CertificateProvider `pulumi:"serverCertificate"`
	ServerTlsPolicyId string                                           `pulumi:"serverTlsPolicyId"`
}

// The set of arguments for constructing a ServerTlsPolicy resource.
type ServerTlsPolicyArgs struct {
	//  Determines if server allows plaintext connections. If set to true, server allows plain text connections. By default, it is set to false. This setting is not exclusive of other encryption modes. For example, if `allow_open` and `mtls_policy` are set, server allows both plain text and mTLS connections. See documentation of other encryption modes to confirm compatibility.
	AllowOpen pulumi.BoolPtrInput
	// Free-text description of the resource.
	Description pulumi.StringPtrInput
	// Set of label tags associated with the resource.
	Labels   pulumi.StringMapInput
	Location pulumi.StringPtrInput
	//  Defines a mechanism to provision peer validation certificates for peer to peer authentication (Mutual TLS - mTLS). If not specified, client certificate will not be requested. The connection is treated as TLS and not mTLS. If `allow_open` and `mtls_policy` are set, server allows both plain text and mTLS connections.
	MtlsPolicy MTLSPolicyPtrInput
	// Name of the ServerTlsPolicy resource. It matches the pattern `projects/*/locations/{location}/serverTlsPolicies/{server_tls_policy}`
	Name    pulumi.StringPtrInput
	Project pulumi.StringPtrInput
	//  Defines a mechanism to provision server identity (public and private keys). Cannot be combined with `allow_open` as a permissive mode that allows both plain text and TLS is not supported.
	ServerCertificate GoogleCloudNetworksecurityV1CertificateProviderPtrInput
	ServerTlsPolicyId pulumi.StringInput
}

func (ServerTlsPolicyArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*serverTlsPolicyArgs)(nil)).Elem()
}

type ServerTlsPolicyInput interface {
	pulumi.Input

	ToServerTlsPolicyOutput() ServerTlsPolicyOutput
	ToServerTlsPolicyOutputWithContext(ctx context.Context) ServerTlsPolicyOutput
}

func (*ServerTlsPolicy) ElementType() reflect.Type {
	return reflect.TypeOf((*ServerTlsPolicy)(nil))
}

func (i *ServerTlsPolicy) ToServerTlsPolicyOutput() ServerTlsPolicyOutput {
	return i.ToServerTlsPolicyOutputWithContext(context.Background())
}

func (i *ServerTlsPolicy) ToServerTlsPolicyOutputWithContext(ctx context.Context) ServerTlsPolicyOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ServerTlsPolicyOutput)
}

type ServerTlsPolicyOutput struct{ *pulumi.OutputState }

func (ServerTlsPolicyOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*ServerTlsPolicy)(nil))
}

func (o ServerTlsPolicyOutput) ToServerTlsPolicyOutput() ServerTlsPolicyOutput {
	return o
}

func (o ServerTlsPolicyOutput) ToServerTlsPolicyOutputWithContext(ctx context.Context) ServerTlsPolicyOutput {
	return o
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*ServerTlsPolicyInput)(nil)).Elem(), &ServerTlsPolicy{})
	pulumi.RegisterOutputType(ServerTlsPolicyOutput{})
}
