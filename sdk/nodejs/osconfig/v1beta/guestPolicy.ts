// *** WARNING: this file was generated by the Pulumi SDK Generator. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as inputs from "../../types/input";
import * as outputs from "../../types/output";
import * as enums from "../../types/enums";
import * as utilities from "../../utilities";

/**
 * Create an OS Config guest policy.
 */
export class GuestPolicy extends pulumi.CustomResource {
    /**
     * Get an existing GuestPolicy resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, opts?: pulumi.CustomResourceOptions): GuestPolicy {
        return new GuestPolicy(name, undefined as any, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'google-native:osconfig/v1beta:GuestPolicy';

    /**
     * Returns true if the given object is an instance of GuestPolicy.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is GuestPolicy {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === GuestPolicy.__pulumiType;
    }

    /**
     * Specifies the VM instances that are assigned to this policy. This allows you to target sets or groups of VM instances by different parameters such as labels, names, OS, or zones. If left empty, all VM instances underneath this policy are targeted. At the same level in the resource hierarchy (that is within a project), the service prevents the creation of multiple policies that conflict with each other. For more information, see how the service [handles assignment conflicts](/compute/docs/os-config-management/create-guest-policy#handle-conflicts).
     */
    public readonly assignment!: pulumi.Output<outputs.osconfig.v1beta.AssignmentResponse>;
    /**
     * Time this guest policy was created.
     */
    public /*out*/ readonly createTime!: pulumi.Output<string>;
    /**
     * Description of the guest policy. Length of the description is limited to 1024 characters.
     */
    public readonly description!: pulumi.Output<string>;
    /**
     * The etag for this guest policy. If this is provided on update, it must match the server's etag.
     */
    public readonly etag!: pulumi.Output<string>;
    /**
     * Required. The logical name of the guest policy in the project with the following restrictions: * Must contain only lowercase letters, numbers, and hyphens. * Must start with a letter. * Must be between 1-63 characters. * Must end with a number or a letter. * Must be unique within the project.
     */
    public readonly guestPolicyId!: pulumi.Output<string>;
    /**
     * Unique name of the resource in this project using one of the following forms: `projects/{project_number}/guestPolicies/{guest_policy_id}`.
     */
    public readonly name!: pulumi.Output<string>;
    /**
     * A list of package repositories to configure on the VM instance. This is done before any other configs are applied so they can use these repos. Package repositories are only configured if the corresponding package manager(s) are available.
     */
    public readonly packageRepositories!: pulumi.Output<outputs.osconfig.v1beta.PackageRepositoryResponse[]>;
    /**
     * The software packages to be managed by this policy.
     */
    public readonly packages!: pulumi.Output<outputs.osconfig.v1beta.PackageResponse[]>;
    public readonly project!: pulumi.Output<string>;
    /**
     * A list of Recipes to install on the VM instance.
     */
    public readonly recipes!: pulumi.Output<outputs.osconfig.v1beta.SoftwareRecipeResponse[]>;
    /**
     * Last time this guest policy was updated.
     */
    public /*out*/ readonly updateTime!: pulumi.Output<string>;

    /**
     * Create a GuestPolicy resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: GuestPolicyArgs, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (!opts.id) {
            if ((!args || args.assignment === undefined) && !opts.urn) {
                throw new Error("Missing required property 'assignment'");
            }
            if ((!args || args.guestPolicyId === undefined) && !opts.urn) {
                throw new Error("Missing required property 'guestPolicyId'");
            }
            resourceInputs["assignment"] = args ? args.assignment : undefined;
            resourceInputs["description"] = args ? args.description : undefined;
            resourceInputs["etag"] = args ? args.etag : undefined;
            resourceInputs["guestPolicyId"] = args ? args.guestPolicyId : undefined;
            resourceInputs["name"] = args ? args.name : undefined;
            resourceInputs["packageRepositories"] = args ? args.packageRepositories : undefined;
            resourceInputs["packages"] = args ? args.packages : undefined;
            resourceInputs["project"] = args ? args.project : undefined;
            resourceInputs["recipes"] = args ? args.recipes : undefined;
            resourceInputs["createTime"] = undefined /*out*/;
            resourceInputs["updateTime"] = undefined /*out*/;
        } else {
            resourceInputs["assignment"] = undefined /*out*/;
            resourceInputs["createTime"] = undefined /*out*/;
            resourceInputs["description"] = undefined /*out*/;
            resourceInputs["etag"] = undefined /*out*/;
            resourceInputs["guestPolicyId"] = undefined /*out*/;
            resourceInputs["name"] = undefined /*out*/;
            resourceInputs["packageRepositories"] = undefined /*out*/;
            resourceInputs["packages"] = undefined /*out*/;
            resourceInputs["project"] = undefined /*out*/;
            resourceInputs["recipes"] = undefined /*out*/;
            resourceInputs["updateTime"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        const replaceOnChanges = { replaceOnChanges: ["guestPolicyId", "project"] };
        opts = pulumi.mergeOptions(opts, replaceOnChanges);
        super(GuestPolicy.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * The set of arguments for constructing a GuestPolicy resource.
 */
export interface GuestPolicyArgs {
    /**
     * Specifies the VM instances that are assigned to this policy. This allows you to target sets or groups of VM instances by different parameters such as labels, names, OS, or zones. If left empty, all VM instances underneath this policy are targeted. At the same level in the resource hierarchy (that is within a project), the service prevents the creation of multiple policies that conflict with each other. For more information, see how the service [handles assignment conflicts](/compute/docs/os-config-management/create-guest-policy#handle-conflicts).
     */
    assignment: pulumi.Input<inputs.osconfig.v1beta.AssignmentArgs>;
    /**
     * Description of the guest policy. Length of the description is limited to 1024 characters.
     */
    description?: pulumi.Input<string>;
    /**
     * The etag for this guest policy. If this is provided on update, it must match the server's etag.
     */
    etag?: pulumi.Input<string>;
    /**
     * Required. The logical name of the guest policy in the project with the following restrictions: * Must contain only lowercase letters, numbers, and hyphens. * Must start with a letter. * Must be between 1-63 characters. * Must end with a number or a letter. * Must be unique within the project.
     */
    guestPolicyId: pulumi.Input<string>;
    /**
     * Unique name of the resource in this project using one of the following forms: `projects/{project_number}/guestPolicies/{guest_policy_id}`.
     */
    name?: pulumi.Input<string>;
    /**
     * A list of package repositories to configure on the VM instance. This is done before any other configs are applied so they can use these repos. Package repositories are only configured if the corresponding package manager(s) are available.
     */
    packageRepositories?: pulumi.Input<pulumi.Input<inputs.osconfig.v1beta.PackageRepositoryArgs>[]>;
    /**
     * The software packages to be managed by this policy.
     */
    packages?: pulumi.Input<pulumi.Input<inputs.osconfig.v1beta.PackageArgs>[]>;
    project?: pulumi.Input<string>;
    /**
     * A list of Recipes to install on the VM instance.
     */
    recipes?: pulumi.Input<pulumi.Input<inputs.osconfig.v1beta.SoftwareRecipeArgs>[]>;
}
